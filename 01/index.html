
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>評価ページ</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 18px;
      line-height: 1.6;
    }
    .info-box {
      background: #f0f0f0;
      padding: 1em;
      border-radius: 8px;
    }
    .highlight {
      color: #c62828;
      font-size: 20px;
      font-weight: bold;
    }
    table {
      border-collapse: collapse;
      margin-top: 1em;
    }
    table, th, td {
      border: 1px solid #999;
      padding: 8px 12px;
    }
    th {
      background-color: #eee;
    }
  </style>
</head>
  
<!-- index.html の </body> 直前に追加: 音声をaudio control=>js -->
<script>
(function() {
  // 拡張子の試行順（必要に応じて並び替え）
  const TRY_EXTS = [".mp3", ".ogg", ".wav"];

  // iOS サウンド解錠
  let unlocked = false;
  function unlockAudio() {
    if (unlocked) return;
    const a = new Audio();
    a.play().catch(() => {}).finally(() => { unlocked = true; });
    window.removeEventListener('touchstart', unlockAudio);
    window.removeEventListener('click', unlockAudio);
  }
  window.addEventListener('touchstart', unlockAudio, { once: true, passive: true });
  window.addEventListener('click', unlockAudio, { once: true });

  // すべての <audio> を処理
  document.querySelectorAll('audio[src], audio[data-src]').forEach(initSmartAudio);

  function initSmartAudio(audioEl) {
    const original = audioEl.getAttribute('data-src') || audioEl.getAttribute('src');
    if (!original) return;

    // ベースパス & 既存拡張子を分離
    const m = original.match(/^(.*?)(\.[a-z0-9]+)$/i);
    const base = m ? m[1] : original;     // 例: "audio/audiobook_19_004_param_09_bertT_combined"
    const origExt = m ? m[2].toLowerCase() : "";

    // 候補拡張子列を作る（元の拡張子を先頭に優先）
    const exts = Array.from(new Set([origExt, ...TRY_EXTS].filter(Boolean)));

    // ブラウザが再生可能と示すものを順に試す
    tryNext(0);

    function tryNext(i) {
      if (i >= exts.length) {
        // 失敗表示（必要ならUI調整）
        audioEl.insertAdjacentHTML('afterend',
          '<div style="color:#c62828">この音声はこの環境で再生できませんでした。</div>');
        return;
      }
      const candidate = base + exts[i];
      const test = new Audio();
      if (canPlayByExt(test, exts[i])) {
        // 実際に設定してロード→エラーなら次
        audioEl.src = candidate;
        // 既存 <source> を消しておく（競合回避）
        audioEl.querySelectorAll('source').forEach(s => s.remove());

        // 一度でも再生を始められればOK。エラーはフォールバック。
        const onError = () => {
          audioEl.removeEventListener('error', onError);
          tryNext(i + 1);
        };
        audioEl.addEventListener('error', onError, { once: true });

        // 自動で .load() しておくとコントロールの初期化が早い
        audioEl.load();
      } else {
        tryNext(i + 1);
      }
    }

    function canPlayByExt(a, ext) {
      // 簡易判定：拡張子から MIME を推定して canPlayType
      const map = {
        ".mp3": "audio/mpeg",
        ".ogg": "audio/ogg",
        ".wav": "audio/wav"
      };
      const type = map[ext.toLowerCase()] || "";
      return !!(type && a.canPlayType && a.canPlayType(type));
    }
  }
})();
</script>

<body>
  <h1>評価ページ </h1>

  <div class="info-box">
    <p>この評価アンケートでは、20件の音声ペア（AとB）を順に評価をお願いします。</p>
    <ul>
      <li>A→B の順に再生してください。</li>
      <li><span class="highlight">Bの音声の自然さやテンポ感を中心に、Aと比較して評価してください。</span></li>
      <li><span class="highlight">以下の基準で、7段階（-3〜+3）の整数で評価します。</span></li>
    </ul>
    <table>
      <tr><th>スコア</th><th>意味</th></tr>
      <tr><td><strong>+3</strong></td><td>Aと比べて非常に自然に感じる</td></tr>
      <tr><td><strong>+2</strong></td><td>Aより自然に感じる</td></tr>
      <tr><td><strong>+1</strong></td><td>Aよりやや自然に感じる</td></tr>
      <tr><td><strong>0</strong></td><td>Aと同程度に自然である</td></tr>
      <tr><td><strong>-1</strong></td><td>Aよりやや不自然に感じる</td></tr>
      <tr><td><strong>-2</strong></td><td>Aより不自然に感じる</td></tr>
      <tr><td><strong>-3</strong></td><td>Aと比べて非常に不自然に感じる</td></tr>
    </table>
    <p>評価結果は以下のGoogleフォームにご記入の上、提出をお願いいたします：</p>
    <p><a href="https://your-google-form-link" target="_blank">👉 Google Formで提出</a></p>
  </div>

  
  <h3>1. 評価文章: 赤とんぼの休んでいる竹には、朝顔のつるがまきついています。昨年の夏、この別荘の主人が植えていった、朝顔の結んだ実がまた生えたんだろうーと、赤とんぼは思いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_004_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_004_param_01_bertT_combined.wav"></audio>
  <hr>

  <h3>2. 評価文章: 赤とんぼは、さっきの竹にまたとまって、じっと近づいて来る人々を見ていました。一番最初にかけて来たのは、赤いリボンの帽子をかぶったか、あいいおじょうちゃんでした。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_009_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_009_param_02_bertT_combined.wav"></audio>
  <hr>

  <h3>3. 評価文章: 赤とんぼは、窓に羽を休めて、書生さんのお話に耳をかたむけています、かあいいおじょうちゃんと同じように。「それからね、そのとんぼは怒って大蜘蛛のやつにくいかかりました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_058_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_058_param_03_bertT_combined.wav"></audio>
  <hr>

  <h3>4. 評価文章: すると、出て来たわ、出て来たわ、小さな蜘蛛が、雲のように出て来ました。けれども、とんぼはもともと強いんですから、片端から蜘蛛にくいついて、とうとう一匹残らず殺してしまいました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_061_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_061_param_04_bertT_combined.wav"></audio>
  <hr>

  <h3>5. 評価文章: ホッとしてそのとんぼが、自分の姿を見ると、これはまあどうでしょう、蜘蛛の血がまっかについてるじゃありませんか。さあ大変だって、とんぼは泉へ飛んで行ってからだを洗いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_063_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_063_param_05_bertT_combined.wav"></audio>
  <hr>

  <h3>6. 評価文章: で、神様にお願いしてみると、お前は、罪の無い蜘蛛をたくさん殺したから、そのたたりでそんなになったんだと、叱られてしまいました。そのとんぼが、今の赤とんぼなんですよ。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_066_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_066_param_06_bertT_combined.wav"></audio>
  <hr>

  <h3>7. 評価文章: 赤とんぼの休んでいる竹には、朝顔のつるがまきついています。昨年の夏、この別荘の主人が植えていった、朝顔の結んだ実がまた生えたんだろうーと、赤とんぼは思いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_004_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_004_param_10_bertT_combined.wav"></audio>
  <hr>

  <h3>8. 評価文章: 赤とんぼは、さっきの竹にまたとまって、じっと近づいて来る人々を見ていました。一番最初にかけて来たのは、赤いリボンの帽子をかぶったか、あいいおじょうちゃんでした。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_009_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_009_param_11_bertT_combined.wav"></audio>
  <hr>

  <h3>9. 評価文章: 赤とんぼは、窓に羽を休めて、書生さんのお話に耳をかたむけています、かあいいおじょうちゃんと同じように。「それからね、そのとんぼは怒って大蜘蛛のやつにくいかかりました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_058_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_058_param_01_bertT_combined.wav"></audio>
  <hr>

  <h3>10. 評価文章: すると、出て来たわ、出て来たわ、小さな蜘蛛が、雲のように出て来ました。けれども、とんぼはもともと強いんですから、片端から蜘蛛にくいついて、とうとう一匹残らず殺してしまいました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_061_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_061_param_02_bertT_combined.wav"></audio>
  <hr>

  <h3>11. 評価文章: ホッとしてそのとんぼが、自分の姿を見ると、これはまあどうでしょう、蜘蛛の血がまっかについてるじゃありませんか。さあ大変だって、とんぼは泉へ飛んで行ってからだを洗いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_063_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_063_param_03_bertF_combined.wav"></audio>
  <hr>

  <h3>12. 評価文章: で、神様にお願いしてみると、お前は、罪の無い蜘蛛をたくさん殺したから、そのたたりでそんなになったんだと、叱られてしまいました。そのとんぼが、今の赤とんぼなんですよ。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_066_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_066_param_04_bertF_combined.wav"></audio>
  <hr>

  <h3>13. 評価文章: 赤とんぼの休んでいる竹には、朝顔のつるがまきついています。昨年の夏、この別荘の主人が植えていった、朝顔の結んだ実がまた生えたんだろうーと、赤とんぼは思いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_004_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_004_param_05_bertF_combined.wav"></audio>
  <hr>

  <h3>14. 評価文章: 赤とんぼは、さっきの竹にまたとまって、じっと近づいて来る人々を見ていました。一番最初にかけて来たのは、赤いリボンの帽子をかぶったか、あいいおじょうちゃんでした。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_009_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_009_param_06_bertF_combined.wav"></audio>
  <hr>

  <h3>15. 評価文章: 赤とんぼは、窓に羽を休めて、書生さんのお話に耳をかたむけています、かあいいおじょうちゃんと同じように。「それからね、そのとんぼは怒って大蜘蛛のやつにくいかかりました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_058_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_058_param_10_bertF_combined.wav"></audio>
  <hr>

  <h3>16. 評価文章: すると、出て来たわ、出て来たわ、小さな蜘蛛が、雲のように出て来ました。けれども、とんぼはもともと強いんですから、片端から蜘蛛にくいついて、とうとう一匹残らず殺してしまいました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_061_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_061_param_11_bertF_combined.wav"></audio>
  <hr>

  <h3>17. 評価文章: ホッとしてそのとんぼが、自分の姿を見ると、これはまあどうでしょう、蜘蛛の血がまっかについてるじゃありませんか。さあ大変だって、とんぼは泉へ飛んで行ってからだを洗いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_063_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_063_param_01_bertF_combined.wav"></audio>
  <hr>

  <h3>18. 評価文章: で、神様にお願いしてみると、お前は、罪の無い蜘蛛をたくさん殺したから、そのたたりでそんなになったんだと、叱られてしまいました。そのとんぼが、今の赤とんぼなんですよ。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_066_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_066_param_02_bertF_combined.wav"></audio>
  <hr>

  <h3>19. 評価文章: 赤とんぼの休んでいる竹には、朝顔のつるがまきついています。昨年の夏、この別荘の主人が植えていった、朝顔の結んだ実がまた生えたんだろうーと、赤とんぼは思いました。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_004_param_09_bertF_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_004_param_03_bertF_combined.wav"></audio>
  <hr>

  <h3>20. 評価文章: 昨年の夏、この別荘の主人が植えていった、朝顔の結んだ実がまた生えたんだろうーと、赤とんぼは思いました。今はこの家には誰もいないので、雨戸が淋しくしまっています。</h3>
  <p><b>A:</b></p>
  <audio controls src="audio/audiobook_19_005_param_09_bertT_combined.wav"></audio>
  <p><b>B:</b></p>
  <audio controls src="audio/audiobook_19_005_param_09_bertF_combined.wav"></audio>
  <hr>

</body>
</html>
